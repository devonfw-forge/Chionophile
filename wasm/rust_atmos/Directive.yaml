# the Directive is a complete description of your application, including all of its business logic.
# appVersion should be updated for each new deployment of your app.
# atmoVersion declares which version of Atmo is used for the `subo dev` command.

identifier: com.suborbital.rust_wasm
appVersion: v0.1.0
atmoVersion: v0.4.7

connections:
  database:
    type: postgresql
    connectionString: postgresql://jtq_user:admin@jtq_postgres_intern:5432/jtq_db

queries:
  - name: "SelectVisitor"
    query: |-
      SELECT * FROM visitor
      WHERE id = $1

handlers:
  - type: request
    resource: /jumpthequeue/services/rest/visitormanagement/v1/visitor/:id/
    method: GET
    steps:
      - fn: GetVisitor

  - type: request
    resource: /jumpthequeue/services/rest/queuemanagement/v1/queue/:id/
    method: GET
    steps:
      - fn: GetQueue
